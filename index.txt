/*
Server side code for the AWS lambda function triggered with
an API Gateway.

Invoke URL:
https://mfx2qgboid.execute-api.us-east-2.amazonaws.com/dictionary/checkword?word={YourWordHere}

This is javascript file. It was saved as txt so it wouldn't be flagged by Gmail's security.
*/

'use strict';

exports.handler = async (event) => {
    let word = '';

    let responseCode = 200;
    let responseBody;

    console.log("request: " + JSON.stringify(event));

    if (event.queryStringParameters && event.queryStringParameters.word) {
        console.log("Received word: " + event.queryStringParameters.word);
        word = event.queryStringParameters.word;
    }

    //Return False 70% of the time.
    var isword = false;
    var random_boolean = Math.random() >= 0.7;
    if (random_boolean)
        isword = true;
    responseBody = {
        is_word: isword,
    };

    let response = {
        statusCode: responseCode,
        headers: {
            "Words Checked" : 'word'
        },
        body: JSON.stringify(responseBody)
    };
    console.log("response: " + JSON.stringify(response));
    return response;
};
    
    
    